<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ุงุฑุงูโุฏุงฺฉ โ ุฌุณุชุฌู ููุดููุฏ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- Header -->
<header>
  <div class="logo">
    <span class="logo-dot">โ</span>
    ุงุฑุงูโุฏุงฺฉ
  </div>
  <span class="header-sub">ุฌุณุชุฌู ููุดููุฏ ูพุงุงูโูุงููโูุง ู ูพุฑููพูุฒุงูโูุง</span>
</header>

<!-- Hero -->
<div class="hero">
  <h1 class="hero-title">ุฌุณุชุฌู <em>ููุดููุฏ</em> ุฏุฑ ููุงุจุน ุนูู</h1><br>
  <p class="hero-desc">ุฌุณุชุฌู ุจุง ุฒุจุงู ุทุจุน ูุงุฑุณ โ ููุชุฑ ุจุฑ ุงุณุงุณ ุณุงูุ ููุทุนุ ุงุณุชุงุฏุ ุฏุงูุดฺฏุงู ู ุจุดุชุฑ</p>

  <div class="search-wrapper">
    <input
      id="searchInput"
      type="text"
      placeholder="ูุซุงู: ูพุงุงูโูุงููโูุง ุฏฺฉุชุฑ ููุด ูุตููุน ุฏุฑ ุฏุงูุดฺฏุงู ุชูุฑุงู"
      autocomplete="off"
    />
    <button id="searchBtn" onclick="runSearch()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/>
      </svg>
      ุฌุณุชุฌู
    </button>
  </div>

  <div class="filters">
    <span class="filter-label">ููุชุฑ ุณุฑุน:</span>
    <button class="filter-chip" onclick="addFilter('ุฏฺฉุชุฑ')">ุฏฺฉุชุฑ</button>
    <button class="filter-chip" onclick="addFilter('ุงุฑุดุฏ')">ุงุฑุดุฏ</button>
    <button class="filter-chip" onclick="addFilter('ูพุฑููพูุฒุงู')">ูพุฑููพูุฒุงู</button>
    <button class="filter-chip" onclick="addFilter('ูพุงุงูโูุงูู')">ูพุงุงูโูุงูู</button>
    <button class="filter-chip" onclick="addFilter('1403')">ฑดฐณ</button>
    <button class="filter-chip" onclick="addFilter('1404')">ฑดฐด</button>
    <select class="top-k-select" id="topKSelect">
      <option value="5">ต ูุชุฌู</option>
      <option value="10" selected>ฑฐ ูุชุฌู</option>
      <option value="20">ฒฐ ูุชุฌู</option>
    </select>
  </div>

  <!-- Advanced settings panel -->
  <div class="advanced-panel">
    <button class="advanced-toggle" onclick="toggleAdvanced()" id="advancedToggleBtn">
      <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
        <circle cx="12" cy="12" r="3"/><path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"/>
      </svg>
      ุชูุธูุงุช ูพุดุฑูุชู
      <span class="adv-arrow" id="advArrow">โพ</span>
    </button>

    <div class="advanced-body" id="advancedBody">

      <!-- Parser mode -->
      <div class="adv-row">
        <span class="adv-label">ุฑูุด ุชุญูู ฺฉูุฆุฑ:</span>
        <div class="parser-toggle-group">
          <button class="parser-btn active" id="parserLlmBtn" onclick="setParser('llm')">
            <span class="parser-icon">๐ค</span>
            ููุด ูุตููุน (LLM)
            <span class="parser-badge">ูพุดููุงุฏ</span>
          </button>
          <button class="parser-btn" id="parserRuleBtn" onclick="setParser('rule')">
            <span class="parser-icon">โ๏ธ</span>
            ุฏุณุช (Regex)
          </button>
        </div>
        <span class="adv-hint" id="parserHint">ููุชุฑูุง ุงุฒ ุทุฑู LLM ุงุณุชุฎุฑุงุฌ ูโุดููุฏ โ ุฏุฑ ุตูุฑุช ุฎุทุงุ ุจู ุฑูุด ุฏุณุช ุณูุฆฺ ูโุดูุฏ</span>
      </div>

      <!-- Cross-encoder selector -->
      <div class="adv-row">
        <span class="adv-label">ูุฏู ุฑุชุจูโุจูุฏ (Cross-Encoder):</span>
        <select class="ce-select" id="ceSelect">
          <option value="">ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ...</option>
        </select>
        <span class="adv-hint">ูุฏูโูุง ุฏููโุชุฑ ฺฉูุฏุชุฑ ูุณุชูุฏ</span>
      </div>

    </div>
  </div>
</div>

<!-- Results -->
<div class="results-area">
  <div class="status-bar" id="statusBar">
    <span class="status-count" id="statusCount"></span>
    <div class="status-meta">
      <span class="status-badge" id="statusParser"></span>
      <span class="status-badge status-badge--ce" id="statusCe"></span>
      <span id="statusTime"></span>
    </div>
  </div>

  <!-- Expanded query display box -->
  <div class="expanded-box" id="expandedBox">
    <span class="expanded-label">๐ ฺฉูุฆุฑ ฺฏุณุชุฑุดโุงูุชู:</span>
    <div class="expanded-terms" id="expandedTerms"></div>
  </div>

  <div id="resultsContainer">
    <div class="state-box">
      <div class="icon">๐</div>
      <p>ุนุจุงุฑุช ุฌุณุชุฌู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ</p>
    </div>
  </div>
</div>

<footer>
  <span>ุงุฑุงูโุฏุงฺฉ โ ุฌุณุชุฌู ุชุฑฺฉุจ FAISS + BM25 + Cross-Encoder</span>
  <span id="apiStatus">ุฏุฑ ุญุงู ุงุชุตุงู ุจู ุณุฑูุฑ...</span>
</footer>

<script src="app.js"></script>
</body>
</html>